methods：指向常量池索引集合，它完整描述了每个方法的签名。

- 在字节码文件中，<font color="orange">每一个method_info项都对应着一个类或者接口中的方法信息</font>。比如方法的访问修饰符（public、private或protected），方法的返回值类型以及方法的参数信息等。

- 如果这个方法不是抽象的或者不是native的，那么字节码中会体现出来。

- 一方面，methods表只描述当前类或接口中声明的方法，不包括从父类或父接口继承的方法。另一方面，methods表有可能会出现由编译器自动添加的方法，最典型的便是编译器产生的方法信息（比如：类（接口）初始化方法<clinit>()和实例初始化方法<init>()）。

**使用注意事项：**

在Java语言中，要<font color="orange">重载（Overload）一个方法</font>，除了要与原方法具有相同的简单名称之外，还要求<font color="orange">必须拥有一个与原方法不同的特征签名</font>，特征签名就是一个方法中各个参数在常量池中的字段符号引用的集合，也就是因为返回值不会包含在特征签名之中，因此<font color="orange">Java语言里无法仅仅依靠返回值的不同来对一个已有方法进行重载</font>。但在Class文件格式中，特征签名的范围更大一些，只要描述符不是完全一致的两个方法就可以共存。也就是说，如果两个方法有相同的名称和特征签名，但返回值不同，那么也是可以合法共存于同一个class文件中。

也就是说，<font color="orange">尽管Java语法规范并不允许在一个类或者接口中声明多个方法签名相同的方法，但是和Java语法规范相反，字节码文件中却恰恰允许存放多个方法签名相同的方法，唯一的条件就是这些方法之间的返回值不能相同</font>。

```java
public void method1(){
}
public void method1(int num){ // 重载
}
public int method1(int num){ // 这个方法会报错
    return 1;
}
```



## methods_count（方法计数器）

methods_count的值表示当前class文件methods表的成员个数。使用两个字节来表示。

methods表中每个成员都是一个method_info结构。

![image-20230506024543438](image/85.%E6%96%B9%E6%B3%95%E8%A1%A8%E9%9B%86%E5%90%88/image-20230506024543438.png)



## methods[]（方法表）

methods表中的每个成员都必须是一个method_info结构，用于表示当前类或接口中某个方法的完整描述。如果某个method_info结构的access_flags项既没有设置ACC_NATIVE标志也没有设置ACC_ABSTRACT标志，那么该结构中也应包含实现这个方法所用的Java虚拟机指令。

method_info结构可以表示类和接口中定义的所有方法，包括实例方法、类方法、实例初始化方法和类或接口初始化方法

方法表的结构实际跟字段表是一样的，方法表结构如下：

| 标志名称       | 标志值           | 含义       | 数量             |
| -------------- | ---------------- | ---------- | ---------------- |
| u2             | access_flags     | 访问标识   | 1                |
| u2             | name_index       | 方法名索引 | 1                |
| u2             | descriptor_index | 描述符索引 | 1                |
| u2             | attributes_count | 属性计数器 | 1                |
| attribute_info | attributes       | 属性集合   | attributes_count |



### 方法的访问标识

跟字段表一样，方法表也有访问标志，而且他们的标志有部分相同，部分则不同，方法表的具体访问标志如下：

| 标志名称      | 标志值 | 含义                                |
| ------------- | ------ | ----------------------------------- |
| ACC_PUBLIC    | 0x0001 | public，方法可以从包外访问          |
| ACC_PRIVATE   | 0x0002 | private，方法只能本类访问           |
| ACC_PROTECTED | 0x0004 | protected，方法在自身和子类可以访问 |
| ACC_STATIC    | 0x0008 | static，静态方法                    |

![image-20230506025003457](image/85.%E6%96%B9%E6%B3%95%E8%A1%A8%E9%9B%86%E5%90%88/image-20230506025003457.png)

### 方法名的索引

![image-20230506025157446](image/85.%E6%96%B9%E6%B3%95%E8%A1%A8%E9%9B%86%E5%90%88/image-20230506025157446.png)

### 描述符索引【就是返回值】

![image-20230506025359576](image/85.%E6%96%B9%E6%B3%95%E8%A1%A8%E9%9B%86%E5%90%88/image-20230506025359576.png)

### 方法的属性计数器

这个1代表的就是code

![image-20230506025903921](image/85.%E6%96%B9%E6%B3%95%E8%A1%A8%E9%9B%86%E5%90%88/image-20230506025903921.png)